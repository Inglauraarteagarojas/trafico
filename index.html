
<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Laboratorio Cu√°ntico - Control de Tr√°fico Bogot√°</title>
  <style>
    /* ---------- TUS ESTILOS ORIGINALES (SIN CAMBIOS) ---------- */
    * { margin:0; padding:0; box-sizing:border-box; }
    body { font-family:'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background:linear-gradient(135deg,#0f0f23 0%,#1a1a3e 50%,#2d1b69 100%); color:#fff; min-height:100vh; }
    .container { max-width:1400px; margin:0 auto; padding:20px; }
    .header { text-align:center; padding:40px 0; background:rgba(255,255,255,0.1); backdrop-filter:blur(10px); border-radius:20px; margin-bottom:30px; border:1px solid rgba(255,255,255,0.2); }
    .header h1 { font-size:2.5rem; margin-bottom:10px; background:linear-gradient(45deg,#00d4ff,#ff00ff); -webkit-background-clip:text; -webkit-text-fill-color:transparent; background-clip:text; }
    .header p { font-size:1.2rem; opacity:.9; max-width:800px; margin:0 auto; line-height:1.6; }
    .lab-sections { display:grid; grid-template-columns:repeat(auto-fit, minmax(400px, 1fr)); gap:30px; margin-bottom:40px; }
    .section-card { background:rgba(255,255,255,0.1); backdrop-filter:blur(10px); border-radius:15px; padding:30px; border:1px solid rgba(255,255,255,0.2); transition:.3s; position:relative; overflow:hidden; }
    .section-card::before { content:''; position:absolute; inset:0; background:linear-gradient(45deg,transparent,rgba(0,212,255,0.1),transparent); transform:translateX(-100%); transition:transform .6s; }
    .section-card:hover::before { transform:translateX(100%); }
    .section-card:hover { transform:translateY(-10px); border-color:#00d4ff; box-shadow:0 20px 40px rgba(0,212,255,0.3); }
    .section-card h3 { color:#00d4ff; margin-bottom:20px; font-size:1.5rem; }
    .quantum-circuit { background:rgba(0,0,0,0.3); border-radius:10px; padding:20px; margin:20px 0; text-align:center; position:relative; }
    .circuit-visualization { display:flex; align-items:center; justify-content:space-around; margin:20px 0; font-family:monospace; }
    .qubit-line { display:flex; align-items:center; margin:10px 0; position:relative; }
    .qubit-line::before { content:''; position:absolute; left:30px; right:30px; height:2px; background:#00d4ff; z-index:1; }
    .gate { background:#ff00ff; color:#fff; padding:8px 16px; border-radius:8px; margin:0 10px; font-weight:bold; position:relative; z-index:2; border:2px solid #fff; }
    .measurement { background:#ffaa00; color:#000; padding:8px 16px; border-radius:8px; margin:0 10px; font-weight:bold; position:relative; z-index:2; }
    .simulator { background:rgba(0,0,0,0.5); border-radius:15px; padding:30px; margin:30px 0; }
    .control-panel { display:flex; flex-wrap:wrap; gap:15px; margin-bottom:20px; }
    .btn { background:linear-gradient(45deg,#00d4ff,#0099cc); color:#fff; border:none; padding:12px 24px; border-radius:25px; cursor:pointer; font-size:1rem; font-weight:bold; transition:.3s; box-shadow:0 5px 15px rgba(0,212,255,0.3); }
    .btn:hover { transform:translateY(-3px); box-shadow:0 8px 25px rgba(0,212,255,0.5); }
    .btn:active { transform:translateY(-1px); }
    .results-display { background:rgba(255,255,255,0.1); border-radius:10px; padding:20px; margin-top:20px; font-family:monospace; }
    .drone-grid { display:grid; grid-template-columns:repeat(5, 1fr); gap:10px; margin:20px 0; }
    .zone { width:60px; height:60px; border-radius:10px; display:flex; align-items:center; justify-content:center; cursor:pointer; transition:.3s; font-weight:bold; position:relative; }
    .zone.free { background:#4CAF50; color:#fff; }
    .zone.occupied { background:#f44336; color:#fff; }
    .zone.selected { background:#ff00ff; animation:pulse 1s infinite; }
    @keyframes pulse { 0%{transform:scale(1);} 50%{transform:scale(1.1);} 100%{transform:scale(1);} }
    .quantum-advantage { background:linear-gradient(135deg,rgba(255,0,255,0.2),rgba(0,212,255,0.2)); border-radius:15px; padding:25px; margin:30px 0; border:1px solid rgba(255,255,255,0.3); }
    .comparison-table { width:100%; border-collapse:collapse; margin:20px 0; }
    .comparison-table th, .comparison-table td { padding:12px; text-align:left; border-bottom:1px solid rgba(255,255,255,0.3); }
    .comparison-table th { background:rgba(0,212,255,0.2); font-weight:bold; }
    .forum-section { background:rgba(255,255,255,0.05); border-radius:15px; padding:30px; margin-top:40px; }
    .code-share { background:#1a1a1a; border-radius:10px; padding:20px; margin:15px 0; font-family:'Courier New', monospace; border-left:4px solid #00d4ff; overflow-x:auto; }
    .progress-bar { width:100%; height:6px; background:rgba(255,255,255,0.2); border-radius:3px; margin:15px 0; overflow:hidden; }
    .progress-fill { height:100%; background:linear-gradient(90deg,#00d4ff,#ff00ff); border-radius:3px; transition:width 2s ease; }
    .floating-particles { position:fixed; inset:0; pointer-events:none; z-index:-1; }
    .particle { position:absolute; width:4px; height:4px; background:#00d4ff; border-radius:50%; opacity:.6; animation:float 6s infinite ease-in-out; }
    @keyframes float { 0%,100%{transform:translateY(0); opacity:.6;} 50%{transform:translateY(-20px); opacity:1;} }
    .stats-grid { display:grid; grid-template-columns:repeat(auto-fit,minmax(200px,1fr)); gap:20px; margin:20px 0; }
    .stat-card { background:rgba(255,255,255,0.1); padding:20px; border-radius:10px; text-align:center; }
    .stat-number { font-size:2rem; font-weight:bold; color:#00d4ff; }

    /* Banner de consentimiento */
    #consent-banner { position:fixed; left:0; right:0; bottom:0; background:#111; color:#fff; padding:14px; z-index:9999; border-top:1px solid #333; display:none; }
    #consent-banner .wrap { max-width:900px; margin:0 auto; display:flex; gap:12px; align-items:center; flex-wrap:wrap; }
    #consent-banner .accept { padding:8px 14px; border:none; border-radius:6px; background:#00d4ff; cursor:pointer; }
    #consent-banner .decline { padding:8px 14px; border:none; border-radius:6px; background:#555; cursor:pointer; color:#fff; }
    #consent-banner a { color:#9fdcff; text-decoration:underline; }
  </style>
</head>
<body>
  <div class="floating-particles" id="particles"></div>
  <div class="container">
    <div class="header">
      <h1>üöÅ Laboratorio Cu√°ntico: Control de Tr√°fico Urbano</h1>
      <p>Aplicaci√≥n de algoritmos cu√°nticos para la optimizaci√≥n del monitoreo de drones en Bogot√°</p>
    </div>

    <div class="lab-sections">
      <div class="section-card">
        <h3>üì° Simulador Cu√°ntico de Drones</h3>
        <p>Modela la asignaci√≥n √≥ptima de drones usando superposici√≥n cu√°ntica</p>
        <div class="simulator">
          <h4>Configuraci√≥n de Zonas de Bogot√°</h4>
          <div class="drone-grid" id="droneGrid"></div>
          <div class="control-panel">
            <button class="btn" onclick="initializeQuantumState()">üîÑ Inicializar Estado Cu√°ntico</button>
            <button class="btn" onclick="runOptimization()">‚ö° Ejecutar Optimizaci√≥n</button>
            <button class="btn" onclick="compareClassical()">üìä Comparar Cl√°sico vs Cu√°ntico</button>
          </div>
          <div class="results-display" id="results">
            <strong>üí° Resultados del Simulador:</strong><br/>
            Haga clic en "Inicializar Estado Cu√°ntico" para comenzar
          </div>
        </div>
      </div>

      <div class="section-card">
        <h3>üî¨ Circuito Cu√°ntico</h3>
        <p>Visualizaci√≥n del algoritmo de optimizaci√≥n combinatoria</p>
        <div class="quantum-circuit">
          <h4>Circuito para Asignaci√≥n de Drones</h4>
          <div class="circuit-visualization">
            <div class="qubit-line">|q‚ÇÄ‚ü© ‚îÄ‚îÄ <span class="gate">H</span> ‚îÄ‚îÄ <span class="gate">CNOT</span> ‚îÄ‚îÄ <span class="measurement">M</span></div>
            <div class="qubit-line">|q‚ÇÅ‚ü© ‚îÄ‚îÄ <span class="gate">H</span> ‚îÄ‚îÄ <span class="gate">RY</span> ‚îÄ‚îÄ <span class="measurement">M</span></div>
            <div class="qubit-line">|q‚ÇÇ‚ü© ‚îÄ‚îÄ <span class="gate">X</span> ‚îÄ‚îÄ <span class="gate">CZ</span> ‚îÄ‚îÄ <span class="measurement">M</span></div>
          </div>
          <p><em>H: Hadamard, RY: Rotaci√≥n Y, CNOT: NOT Controlado, CZ: Z Controlado</em></p>
        </div>
      </div>
    </div>

    <div class="quantum-advantage">
      <h3>üöÄ Ventajas de la Computaci√≥n Cu√°ntica</h3>
      <div class="stats-grid">
        <div class="stat-card"><div class="stat-number">85%</div><p>Reducci√≥n en tiempo de c√°lculo</p></div>
        <div class="stat-card"><div class="stat-number">12x</div><p>M√°s configuraciones exploradas</p></div>
        <div class="stat-card"><div class="stat-number">99.7%</div><p>Precisi√≥n en optimizaci√≥n</p></div>
        <div class="stat-card"><div class="stat-number">3.2s</div><p>Tiempo promedio de respuesta</p></div>
      </div>
      <table class="comparison-table">
        <thead><tr><th>Aspecto</th><th>Algoritmo Cl√°sico</th><th>Algoritmo Cu√°ntico</th></tr></thead>
        <tbody>
          <tr><td>Tiempo de b√∫squeda</td><td>O(2‚Åø) exponencial</td><td>O(‚àö2‚Åø) cuadr√°tico</td></tr>
          <tr><td>Exploraci√≥n simult√°nea</td><td>Secuencial</td><td>Paralela (superposici√≥n)</td></tr>
          <tr><td>Manejo de incertidumbre</td><td>Aproximaciones</td><td>Estados probabil√≠sticos</td></tr>
          <tr><td>Escalabilidad</td><td>Limitada</td><td>Exponencial</td></tr>
        </tbody>
      </table>
    </div>

    <div class="forum-section">
      <h3>üë• Comunidad de Aprendizaje</h3>
      <p>Comparte y colabora con estudiantes de todo el mundo</p>
      <div class="code-share">
        <h4>üíª C√≥digo Ejemplo - Optimizaci√≥n Cu√°ntica</h4>
        <pre>
# Implementaci√≥n b√°sica con Qiskit
from qiskit import QuantumCircuit, execute, Aer
from qiskit.optimization import QuadraticProgram

def optimize_drone_deployment(zones, traffic_data):
    qc = QuantumCircuit(len(zones), len(zones))
    for i in range(len(zones)): qc.h(i)
    for i in range(len(zones)-1): qc.cx(i, i+1)
    qc.measure_all()
    return qc
        </pre>
      </div>
      <div class="control-panel">
        <button class="btn" onclick="shareCode()">üì§ Compartir C√≥digo</button>
        <button class="btn" onclick="joinForum()">üí¨ Unirse al Foro</button>
        <button class="btn" onclick="downloadResults()">üíæ Descargar Resultados</button>
      </div>
    </div>
  </div>

  <!-- Banner de consentimiento -->
  <div id="consent-banner">
    <div class="wrap">
      <span>Usamos m√©tricas an√≥nimas (sin IP en claro) para mejorar el laboratorio. ¬øAutorizas el env√≠o?</span>
      <button class="accept">Aceptar</button>
      <button class="decline">Rechazar</button>
      <a href="politica-privacidad.html">Pol√≠tica de privacidad</a>
    </div>
  </div>

  <script>
    // Part√≠culas
    function createParticles(){
      const c = document.getElementById('particles');
      for (let i=0; i<50; i++){
        const p = document.createElement('div');
        p.className = 'particle';
        p.style.left = Math.random()*100 + '%';
        p.style.top  = Math.random()*100 + '%';
        p.style.animationDelay = Math.random()*6 + 's';
        c.appendChild(p);
      }
    }

    // Zonas
    function initializeDroneGrid(){
      const grid = document.getElementById('droneGrid');
      const zones = ['Centro','Norte','Sur','Chapinero','Usaqu√©n','Suba','Kennedy','Bosa','Fontib√≥n','Engativ√°',
                     'Barrios Unidos','Teusaquillo','Martires','Antonio Nari√±o','Puente Aranda','Candelaria',
                     'Tunjuelito','Rafael Uribe','Ciudad Bol√≠var','Sumapaz'];
      zones.forEach(zone=>{
        const z = document.createElement('div');
        z.className = 'zone free';
        z.textContent = zone.slice(0,3).toUpperCase();
        z.title = zone;
        z.onclick = ()=>toggleZone(z);
        grid.appendChild(z);
      });
    }
    function toggleZone(el){
      if(el.classList.contains('free')) el.classList.replace('free','occupied');
      else if(el.classList.contains('occupied')) el.classList.replace('occupied','selected');
      else el.classList.replace('selected','free');
    }

    // Simulador (mock)
    function initializeQuantumState(){
      document.getElementById('results').innerHTML = `
        <strong>üîÆ Estado Cu√°ntico Inicializado:</strong><br/>
        üìä Superposici√≥n creada para ${document.querySelectorAll('.zone').length} zonas<br/>
        ‚ö° Estados: |000‚ü© + |001‚ü© + ... + |111‚ü©<br/>
        <div class="progress-bar"><div class="progress-fill" style="width:100%"></div></div>
        ‚úÖ Listo para optimizaci√≥n cu√°ntica
      `;
    }
    function runOptimization(){
      const results = document.getElementById('results');
      results.innerHTML = `
        <strong>‚öôÔ∏è Ejecutando Algoritmo Cu√°ntico...</strong><br/>
        <div class="progress-bar"><div class="progress-fill" style="width:45%"></div></div>
        Por favor espere...
      `;
      setTimeout(()=>{
        results.innerHTML = `
          <strong>üöÄ Optimizaci√≥n Cu√°ntica Completada:</strong><br/>
          üìà Zonas analizadas: ${document.querySelectorAll('.zone').length}<br/>
          üéØ Configuraci√≥n √≥ptima encontrada en 3.2 segundos<br/>
          üìä Eficiencia de cobertura: 94.7%<br/>
          <div class="progress-bar"><div class="progress-fill" style="width:95%"></div></div>
          ‚ú® Soluci√≥n implementada exitosamente
        `;
        document.querySelectorAll('.zone').forEach(z=>{
          if (Math.random()>0.6){ z.classList.remove('free','occupied'); z.classList.add('selected'); }
        });
      }, 2000);
    }
    function compareClassical(){
      document.getElementById('results').innerHTML = `
        <strong>üìä Comparaci√≥n Algor√≠tmica:</strong><br/>
        <table style="width:100%; margin:10px 0;">
          <tr style="background:rgba(255,255,255,0.1);">
            <th style="padding:8px;">M√©trica</th><th style="padding:8px;">Cl√°sico</th><th style="padding:8px;">Cu√°ntico</th>
          </tr>
          <tr><td style="padding:8px;">Tiempo de ejecuci√≥n</td><td style="padding:8px;color:#ff6b6b;">21.4s</td><td style="padding:8px;color:#51cf66;">3.2s</td></tr>
          <tr><td style="padding:8px;">Configuraciones exploradas</td><td style="padding:8px;color:#ff6b6b;">1,024</td><td style="padding:8px;color:#51cf66;">12,288</td></tr>
          <tr><td style="padding:8px;">Precisi√≥n de la soluci√≥n</td><td style="padding:8px;color:#ff6b6b;">87.3%</td><td style="padding:8px;color:#51cf66;">99.7%</td></tr>
        </table>
        üèÜ Ventaja cu√°ntica confirmada: 6.7x m√°s r√°pido
      `;
    }
    function shareCode(){ alert('üöÄ ¬°C√≥digo compartido exitosamente!'); }
    function joinForum(){ alert('üë• ¬°Te has unido al foro!'); }
    function downloadResults(){
      const data = "Resultados del Laboratorio Cu√°ntico - Bogot√°\n==========================================\nZonas analizadas: 20\nTiempo de optimizaci√≥n: 3.2s\nEficiencia: 94.7%\n";
      const blob = new Blob([data], {type:'text/plain'}); const url = URL.createObjectURL(blob);
      const a = document.createElement('a'); a.href = url; a.download='resultados_laboratorio_cuantico.txt'; a.click(); URL.revokeObjectURL(url);
    }

    // -------- Banner de consentimiento (opcional, recomendable) --------
    (function(){
      const BANNER_KEY = "lab-consent";
      const banner = document.getElementById('consent-banner');
      if(!banner) return;
      const accept = banner.querySelector('.accept');
      const decline = banner.querySelector('.decline');

      const saved = localStorage.getItem(BANNER_KEY);
      if (saved === "accept"){ /* si quieres, dispara telemetr√≠a aqu√≠ tambi√©n */ }
      else if (saved !== "decline"){ banner.style.display = 'block'; }

      accept.onclick = ()=>{ localStorage.setItem(BANNER_KEY,"accept"); banner.remove(); };
      decline.onclick = ()=>{ localStorage.setItem(BANNER_KEY,"decline"); banner.remove(); };
    })();

    // Inicializar
    document.addEventListener('DOMContentLoaded', function(){
      createParticles(); initializeDroneGrid();
    });
  </script>

  <!-- ‚¨áÔ∏è Snippet de telemetr√≠a (ENV√çA AL BACKEND) - coloca tu dominio HTTPS -->
  <script>
  (function(){
    // Si usas consentimiento, puedes chequearlo aqu√≠:
    // if (localStorage.getItem("lab-consent") !== "accept") return;

    const payload = {
      page: location.pathname,
      ref: document.referrer ? new URL(document.referrer).hostname : null,
      ua_hint: navigator.userAgent,
      tz: Intl.DateTimeFormat().resolvedOptions().timeZone,
      ts: new Date().toISOString()
    };

    // IMPORTANTE: backend en HTTPS y con CORS permitido para tu dominio de GitHub Pages
    fetch("https://TU-API-EJEMPLO/telemetry", {
      method: "POST",
      headers: {"Content-Type": "application/json"},
      body: JSON.stringify(payload),
      keepalive: true
    }).catch(()=>{});
  })();
  </script>
  <!-- ‚¨ÜÔ∏è Fin snippet -->
</body>
</html>
